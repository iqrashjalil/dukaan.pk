var v={};Object.defineProperty(v,"__esModule",{value:!0});var F=1/60*1e3,y=typeof performance<"u"?function(){return performance.now()}:function(){return Date.now()},w=typeof window<"u"?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout(function(){return e(y())},F)};function R(e){var r=[],u=[],o=0,a=!1,f=new WeakSet,x={schedule:function(t,n,s){n===void 0&&(n=!1),s===void 0&&(s=!1);var i=s&&a,g=i?r:u;return n&&f.add(t),g.indexOf(t)===-1&&(g.push(t),i&&a&&(o=r.length)),t},cancel:function(t){var n=u.indexOf(t);n!==-1&&u.splice(n,1),f.delete(t)},process:function(t){var n;if(a=!0,n=[u,r],r=n[0],u=n[1],u.length=0,o=r.length,o)for(var s=0;s<o;s++){var i=r[s];i(t),f.has(i)&&(x.schedule(i),e())}a=!1}};return x}var T=40,m=!0,c=!1,h=!1,d={delta:0,timestamp:0},p=["read","update","preRender","render","postRender"],l=p.reduce(function(e,r){return e[r]=R(function(){return c=!0}),e},{}),D=p.reduce(function(e,r){var u=l[r];return e[r]=function(o,a,f){return a===void 0&&(a=!1),f===void 0&&(f=!1),c||M(),u.schedule(o,a,f)},e},{}),O=p.reduce(function(e,r){return e[r]=l[r].cancel,e},{}),_=p.reduce(function(e,r){return e[r]=function(){return l[r].process(d)},e},{}),E=function(e){return l[e].process(d)},S=function(e){c=!1,d.delta=m?F:Math.max(Math.min(e-d.timestamp,T),1),d.timestamp=e,h=!0,p.forEach(E),h=!1,c&&(m=!1,w(S))},M=function(){c=!0,m=!0,h||w(S)},N=function(){return d};v.cancelSync=O;v.default=D;v.flushSync=_;v.getFrameData=N;export{v as f};
